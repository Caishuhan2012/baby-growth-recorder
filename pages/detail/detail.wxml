<!--pages/detail/detail.wxml-->
<view class="container">
  <!-- шо░х╜ХхЖЕхо╣ -->
  <view class="detail-content card" wx:if="{{record}}">
    <view class="content-header flex-between mb-24">
      <text class="title">шо░х╜ХшпжцГЕ</text>
      <button 
        class="btn-secondary small" 
        bindtap="editRecord"
        wx:if="{{!isEditing}}"
      >
        ч╝Цш╛С
      </button>
    </view>

    <view class="content-body">
      <!-- цЯечЬЛцибх╝П -->
      <view wx:if="{{!isEditing}}">
        <text class="text content-text">{{record.content}}</text>
      </view>

      <!-- ч╝Цш╛Сцибх╝П -->
      <view wx:else>
        <textarea 
          class="textarea edit-textarea"
          value="{{editContent}}"
          bindinput="onEditInput"
          auto-height
          maxlength="1000"
          focus="{{true}}"
          placeholder="шп╖ш╛УхЕехЖЕхо╣..."
        ></textarea>
        <view class="char-count text-small mt-16">
          {{editContent.length}}/1000
        </view>
        
        <view class="edit-actions flex mt-24">
          <button 
            class="btn-secondary flex-1 mr-16" 
            bindtap="cancelEdit"
          >
            хПЦц╢И
          </button>
          <button 
            class="btn-primary flex-1" 
            bindtap="saveEdit"
            disabled="{{!editContent.trim()}}"
          >
            ф┐ЭхнШ
          </button>
        </view>
      </view>
    </view>

    <!-- цЧ╢щЧ┤ф┐бцБп -->
    <view class="time-info mt-24">
      <view class="time-item">
        <text class="text-secondary">хИЫх╗║цЧ╢щЧ┤я╝Ъ{{record.createTimeText}}</text>
      </view>
      <view class="time-item" wx:if="{{record.updateTimeText !== record.createTimeText}}">
        <text class="text-secondary">цЬАхРОч╝Цш╛Ся╝Ъ{{record.updateTimeText}}</text>
      </view>
    </view>
  </view>

  <!-- цУНф╜ЬцМЙщТо -->
  <view class="actions card" wx:if="{{record && !isEditing}}">
    <view class="subtitle mb-16">цУНф╜Ь</view>
    <view class="action-buttons">
      <button 
        class="action-btn" 
        bindtap="copyContent"
      >
        <text class="action-icon">ЁЯУЛ</text>
        <text class="action-text">хдНхИ╢хЖЕхо╣</text>
      </button>
      
      <button 
        class="action-btn" 
        bindtap="shareRecord"
      >
        <text class="action-icon">ЁЯУд</text>
        <text class="action-text">хИЖф║лшо░х╜Х</text>
      </button>
      
      <button 
        class="action-btn danger" 
        bindtap="showDeleteConfirm"
      >
        <text class="action-icon">ЁЯЧСя╕П</text>
        <text class="action-text">хИащЩдшо░х╜Х</text>
      </button>
    </view>
  </view>

  <!-- хКаш╜╜чК╢цАБ -->
  <view class="loading" wx:if="{{!record}}">
    <view class="loading-text">хКаш╜╜ф╕н...</view>
  </view>
</view>

<!-- хИащЩдчбошодцибцАБцбЖ -->
<view class="modal-overlay" wx:if="{{showDeleteModal}}" bindtap="hideDeleteModal">
  <view class="modal" catchtap="preventClose">
    <view class="modal-header">
      <text class="title">чбошодхИащЩд</text>
    </view>
    <view class="modal-body">
      <text class="text">чбохоЪшжБхИащЩдш┐ЩцЭбшо░х╜ХхРЧя╝ЯхИащЩдхРОцЧац│ХцБвхдНуАВ</text>
    </view>
    <view class="modal-footer flex">
      <button class="btn-secondary flex-1 mr-16" bindtap="hideDeleteModal">
        хПЦц╢И
      </button>
      <button class="btn-danger flex-1" bindtap="confirmDelete">
        хИащЩд
      </button>
    </view>
  </view>
</view> 