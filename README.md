# å®å®æˆé•¿è®°å½• - å¾®ä¿¡å°ç¨‹åº

ğŸ€ AIé©±åŠ¨çš„å®å®æˆé•¿è®°å½•å°ç¨‹åºï¼Œé€šè¿‡å¾®ä¿¡èŠå¤©å‘é€ç…§ç‰‡è‡ªåŠ¨ç”Ÿæˆæ¸©é¦¨çš„æˆé•¿æ•…äº‹ã€‚

## âœ¨ åŠŸèƒ½ç‰¹è‰²

- ğŸ“± **å¾®ä¿¡å°ç¨‹åº**ï¼šç²¾ç¾çš„æ—¶å…‰è½´ç•Œé¢å±•ç¤º
- ğŸ¤– **AIæ™ºèƒ½å¤„ç†**ï¼šè‡ªåŠ¨ç”Ÿæˆæ¸©æš–çš„æˆé•¿æ•…äº‹  
- ğŸ·ï¸ **æ™ºèƒ½æ ‡ç­¾**ï¼šè‡ªåŠ¨åˆ†ç±»"å®å®çš„ç¬¬ä¸€æ¬¡"ã€"æˆé•¿æ›²çº¿"ç­‰
- ğŸ’¬ **å¾®ä¿¡èŠå¤©é›†æˆ**ï¼šå‘é€ç…§ç‰‡+æè¿°å³å¯è®°å½•
- ğŸ¨ **æ¸©é¦¨è®¾è®¡**ï¼šä¸“ä¸ºäº²å­åœºæ™¯è®¾è®¡çš„ç²‰è‰²ä¸»é¢˜

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

```
å¾®ä¿¡èŠå¤© â†’ å¾®ä¿¡å…¬ä¼—å· â†’ VercelæœåŠ¡å™¨ â†’ å°ç¨‹åºäº‘æ•°æ®åº“ â†’ æ—¶å…‰è½´å±•ç¤º
```

- **å‰ç«¯**ï¼šå¾®ä¿¡å°ç¨‹åºåŸç”Ÿæ¡†æ¶
- **åç«¯**ï¼šExpress.js + Vercelæ‰˜ç®¡  
- **æ•°æ®åº“**ï¼šå¾®ä¿¡äº‘å¼€å‘æ•°æ®åº“
- **AIæœåŠ¡**ï¼šè…¾è®¯äº‘å›¾åƒè¯†åˆ« + DeepSeekæ–‡æœ¬ç”Ÿæˆ

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ pages/              # å°ç¨‹åºé¡µé¢
â”‚   â”œâ”€â”€ timeline/      # æ—¶å…‰è½´ä¸»é¡µé¢
â”‚   â”œâ”€â”€ chat/          # èŠå¤©è®°å½•é¡µé¢  
â”‚   â”œâ”€â”€ detail/        # è¯¦æƒ…é¡µé¢
â”‚   â””â”€â”€ settings/      # è®¾ç½®é¡µé¢
â”œâ”€â”€ server/            # VercelæœåŠ¡å™¨ä»£ç 
â”‚   â”œâ”€â”€ index.js       # ExpressæœåŠ¡å™¨
â”‚   â””â”€â”€ package.json   # ä¾èµ–é…ç½®
â”œâ”€â”€ cloudfunctions/    # äº‘å‡½æ•°
â”‚   â”œâ”€â”€ aiProcessor/   # AIå¤„ç†å‡½æ•°
â”‚   â””â”€â”€ wechatServer/  # å¾®ä¿¡æ¶ˆæ¯å¤„ç†
â””â”€â”€ vercel.json        # Verceléƒ¨ç½²é…ç½®

```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### 1. Verceléƒ¨ç½²ï¼ˆå¾®ä¿¡æœåŠ¡å™¨ï¼‰
- è¿æ¥GitHubä»“åº“åˆ°Vercel
- è‡ªåŠ¨è·å¾—HTTPSåŸŸå
- é…ç½®å¾®ä¿¡å…¬ä¼—å·æœåŠ¡å™¨URL

### 2. å¾®ä¿¡å°ç¨‹åºéƒ¨ç½²  
- é…ç½®äº‘å¼€å‘ç¯å¢ƒ
- éƒ¨ç½²äº‘å‡½æ•°
- å‘å¸ƒå°ç¨‹åºç‰ˆæœ¬

## ğŸ“± ä½¿ç”¨æ–¹æ³•

1. **å…³æ³¨å…¬ä¼—å·**ï¼š`å®å®æˆé•¿è®°å½•åŠ©æ‰‹`
2. **å‘é€ç…§ç‰‡**ï¼šç›´æ¥å‘é€å®å®ç…§ç‰‡
3. **æ·»åŠ æè¿°**ï¼šå‘é€æ–‡å­—æè¿°è¡¥å……ä¿¡æ¯
4. **æŸ¥çœ‹ç»“æœ**ï¼šåœ¨å°ç¨‹åºä¸­æŸ¥çœ‹AIç”Ÿæˆçš„æ•…äº‹
5. **æ—¶å…‰è½´æµè§ˆ**ï¼šæŒ‰æ—¶é—´çº¿æŸ¥çœ‹æ‰€æœ‰æˆé•¿è®°å½•

## ğŸ¯ æ ¸å¿ƒäº®ç‚¹

- **é›¶å­¦ä¹ æˆæœ¬**ï¼šé€šè¿‡ç†Ÿæ‚‰çš„å¾®ä¿¡èŠå¤©è®°å½•
- **AIèµ‹èƒ½**ï¼šæ™ºèƒ½å›¾åƒè¯†åˆ«å’Œæ•…äº‹ç”Ÿæˆ
- **æ¸©æƒ…è®¾è®¡**ï¼šä¸“ä¸ºè®°å½•å®å®æˆé•¿è®¾è®¡
- **å®æ—¶åŒæ­¥**ï¼šèŠå¤©è®°å½•å®æ—¶åŒæ­¥åˆ°å°ç¨‹åº

---

ğŸ’ ç”¨AIçš„åŠ›é‡ï¼Œè®°å½•å®å®æˆé•¿çš„æ¯ä¸ªçè´µç¬é—´

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

### æ ¸å¿ƒåŠŸèƒ½
- **æ™ºèƒ½èŠå¤©è®°å½•**ï¼šé€šè¿‡å¾®ä¿¡èŠå¤©å‘é€ç…§ç‰‡+æ–‡å­—ï¼Œè‡ªåŠ¨ç”Ÿæˆæˆé•¿æ•…äº‹
- **AIå›¾åƒè¯†åˆ«**ï¼šä½¿ç”¨è…¾è®¯äº‘AIè¯†åˆ«å›¾ç‰‡å†…å®¹ï¼ˆç‰©ä½“ã€åœºæ™¯ã€æƒ…æ„Ÿï¼‰
- **æ•…äº‹è‡ªåŠ¨ç”Ÿæˆ**ï¼šé›†æˆDeepSeek APIç”Ÿæˆæ¸©æš–ä¼˜é›…çš„æˆé•¿å™äº‹
- **æ™ºèƒ½åˆ†ç±»ç³»ç»Ÿ**ï¼šè‡ªåŠ¨æå–æ ‡ç­¾ï¼ŒæŒ‰ç±»åˆ«ç»„ç»‡æˆé•¿è®°å½•
- **æ—¶å…‰è½´å±•ç¤º**ï¼šç¾è§‚çš„æ—¶é—´è½´ç•Œé¢å±•ç¤ºå®å®æˆé•¿å†ç¨‹

### æŠ€æœ¯ç‰¹è‰²
- **äº‘åŸç”Ÿæ¶æ„**ï¼šå¾®ä¿¡äº‘å¼€å‘ + äº‘å‡½æ•° + äº‘æ•°æ®åº“ + äº‘å­˜å‚¨
- **AIé›†æˆ**ï¼šè…¾è®¯äº‘å›¾åƒè¯†åˆ« + DeepSeekæ–‡æœ¬ç”Ÿæˆ
- **å®æ—¶å¤„ç†**ï¼šæ¶ˆæ¯ç›‘å¬ â†’ AIå¤„ç† â†’ æ•°æ®å­˜å‚¨ â†’ ç•Œé¢æ›´æ–°
- **æ™ºèƒ½æ ‡ç­¾**ï¼šè‡ªåŠ¨è¯†åˆ«"ç¬¬ä¸€æ¬¡"ã€"æˆé•¿æ›²çº¿"ã€"è¿åŠ¨å‘å±•"ç­‰ç±»åˆ«

## ğŸ— æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆ
- **å‰ç«¯**ï¼šå¾®ä¿¡å°ç¨‹åºåŸç”Ÿæ¡†æ¶
- **åç«¯**ï¼šå¾®ä¿¡äº‘å¼€å‘ï¼ˆNode.jsäº‘å‡½æ•°ï¼‰
- **æ•°æ®åº“**ï¼šå¾®ä¿¡äº‘æ•°æ®åº“ï¼ˆMongoDBï¼‰
- **å­˜å‚¨**ï¼šå¾®ä¿¡äº‘å­˜å‚¨
- **AIæœåŠ¡**ï¼šè…¾è®¯äº‘å›¾åƒè¯†åˆ«API + DeepSeek API

### æ ¸å¿ƒäº‘å‡½æ•°
```
cloudfunctions/
â”œâ”€â”€ chatListener/     # æ¶ˆæ¯ç›‘å¬äº‘å‡½æ•°
â”‚   â”œâ”€â”€ index.js     # æ•è·å¾®ä¿¡èŠå¤©æ¶ˆæ¯
â”‚   â””â”€â”€ package.json
â””â”€â”€ aiProcessor/     # AIå¤„ç†äº‘å‡½æ•°
    â”œâ”€â”€ index.js     # å›¾åƒè¯†åˆ«+æ•…äº‹ç”Ÿæˆ+æ•°æ®å­˜å‚¨
    â””â”€â”€ package.json
```

### æ•°æ®åº“è®¾è®¡
```javascript
// growth_records é›†åˆ
{
  _id: "record_id",           // è®°å½•ID
  imageUrl: "cloud://...",    // äº‘å­˜å‚¨å›¾ç‰‡URL
  originalText: "å®å®ç¬¬ä¸€æ¬¡èµ°è·¯", // ç”¨æˆ·åŸå§‹æè¿°
  story: "åˆåé˜³å…‰æ´’æ»¡å®¢å…...", // AIç”Ÿæˆçš„æ•…äº‹
  tags: ["å®å®çš„ç¬¬ä¸€æ¬¡"],      // æ™ºèƒ½åˆ†ç±»æ ‡ç­¾
  imageAnalysis: {            // å›¾åƒè¯†åˆ«ç»“æœ
    objects: ["å©´å„¿", "å®¢å…"],
    scenes: ["æ¸©é¦¨", "å®¶åº­"],
    emotions: ["å¿«ä¹"]
  },
  openid: "user_openid",      // ç”¨æˆ·æ ‡è¯†
  createTime: Date,           // åˆ›å»ºæ—¶é—´
  timestamp: Date             // åŸå§‹æ—¶é—´æˆ³
}
```

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½å®ç°

### 1. æ¶ˆæ¯ç›‘å¬æµç¨‹
```javascript
// chatListener äº‘å‡½æ•°
exports.main = async (event) => {
  const { imageUrl, userText, openid } = event
  
  // è°ƒç”¨AIå¤„ç†äº‘å‡½æ•°
  const result = await cloud.callFunction({
    name: 'aiProcessor',
    data: { imageUrl, userText, openid }
  })
  
  return result
}
```

### 2. AIå¤„ç†æµç¨‹
```javascript
// aiProcessor äº‘å‡½æ•°æ ¸å¿ƒæµç¨‹
async function processGrowthRecord(imageUrl, userText) {
  // 1. å›¾åƒè¯†åˆ«
  const imageAnalysis = await analyzeImage(imageUrl)
  
  // 2. æ•…äº‹ç”Ÿæˆ
  const story = await generateStory(imageAnalysis, userText)
  
  // 3. æ™ºèƒ½æ ‡ç­¾
  const tags = generateTags(userText)
  
  // 4. å­˜å‚¨æ•°æ®
  const record = await saveToDatabase({
    imageUrl, originalText: userText,
    story, tags, imageAnalysis
  })
  
  return record
}
```

### 3. æ™ºèƒ½æ ‡ç­¾ç³»ç»Ÿ
```javascript
function generateTags(userText) {
  const tags = []
  
  if (userText.includes('ç¬¬ä¸€æ¬¡')) tags.push('å®å®çš„ç¬¬ä¸€æ¬¡')
  if (userText.includes('èº«é«˜') || userText.includes('ä½“é‡')) tags.push('æˆé•¿æ›²çº¿')
  if (userText.includes('çˆ¬') || userText.includes('èµ°')) tags.push('è¿åŠ¨å‘å±•')
  if (userText.includes('è¯´è¯')) tags.push('è¯­è¨€å‘å±•')
  // ... æ›´å¤šæ™ºèƒ½åˆ†ç±»è§„åˆ™
  
  return tags
}
```

## ğŸ“± é¡µé¢åŠŸèƒ½

### æ—¶å…‰è½´é¡µé¢ (timeline)
- **ç­›é€‰æ ‡ç­¾**ï¼šå…¨éƒ¨ã€å®å®çš„ç¬¬ä¸€æ¬¡ã€æˆé•¿æ›²çº¿ç­‰
- **æ—¶é—´è½´å±•ç¤º**ï¼šå‚ç›´æ—¶é—´è½´å¸ƒå±€ï¼Œå±•ç¤ºæˆé•¿è®°å½•
- **æ‰‹åŠ¨æ·»åŠ **ï¼šæ”¯æŒæ‰‹åŠ¨ä¸Šä¼ ç…§ç‰‡+æè¿°ç”Ÿæˆè®°å½•
- **ä¸‹æ‹‰åˆ·æ–°**ï¼šå®æ—¶åŒæ­¥æœ€æ–°è®°å½•

### èŠå¤©è®°å½•é¡µé¢ (chat)
- **æ¶ˆæ¯å†å²**ï¼šå±•ç¤ºé€šè¿‡èŠå¤©ç”Ÿæˆçš„è®°å½•
- **å®æ—¶åŒæ­¥**ï¼šæ˜¾ç¤ºAIå¤„ç†çŠ¶æ€å’Œç»“æœ

### è¯¦æƒ…é¡µé¢ (detail)
- **å®Œæ•´æ•…äº‹**ï¼šæŸ¥çœ‹AIç”Ÿæˆçš„å®Œæ•´æ•…äº‹
- **åŸå§‹æè¿°**ï¼šå¯¹æ¯”ç”¨æˆ·åŸå§‹è¾“å…¥
- **å›¾åƒåˆ†æ**ï¼šå±•ç¤ºAIè¯†åˆ«çš„å›¾ç‰‡å†…å®¹

### è®¾ç½®é¡µé¢ (settings)
- **å®å®ä¿¡æ¯**ï¼šè®¾ç½®å®å®å¹´é¾„ç­‰åŸºç¡€ä¿¡æ¯
- **AIé…ç½®**ï¼šè°ƒæ•´æ•…äº‹ç”Ÿæˆé£æ ¼
- **æ•°æ®ç®¡ç†**ï¼šå¯¼å‡ºã€å¤‡ä»½æˆé•¿è®°å½•

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡
```bash
# 1. ä¸‹è½½å¾®ä¿¡å¼€å‘è€…å·¥å…·
https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html

# 2. ç”³è¯·å¾®ä¿¡å°ç¨‹åºè´¦å·
https://mp.weixin.qq.com/

# 3. å¼€é€šå¾®ä¿¡äº‘å¼€å‘
åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­å¼€é€šäº‘å¼€å‘ç¯å¢ƒ
```

### 2. é¡¹ç›®é…ç½®
```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>

# 2. å¯¼å…¥å¾®ä¿¡å¼€å‘è€…å·¥å…·
é€‰æ‹©é¡¹ç›®æ ¹ç›®å½•å¯¼å…¥

# 3. é…ç½®äº‘ç¯å¢ƒID
åœ¨ timeline.js ä¸­ä¿®æ”¹ env: 'your-env-id'

# 4. éƒ¨ç½²äº‘å‡½æ•°
å³é”® cloudfunctions æ–‡ä»¶å¤¹ â†’ éƒ¨ç½²
```

### 3. APIå¯†é’¥é…ç½®
```javascript
// åœ¨äº‘å‡½æ•°ç¯å¢ƒå˜é‡ä¸­é…ç½®
DEEPSEEK_API_KEY=your_deepseek_api_key
TENCENT_CLOUD_SECRET_ID=your_secret_id
TENCENT_CLOUD_SECRET_KEY=your_secret_key
```

## ğŸ¨ è®¾è®¡è§„èŒƒ

### è‰²å½©æ–¹æ¡ˆ
- **ä¸»è‰²è°ƒ**ï¼š#FF6B9Dï¼ˆç²‰çº¢è‰²ï¼‰- æ¸©é¦¨äº²å­æ„Ÿ
- **æ¸å˜è‰²**ï¼š#FF6B9D â†’ #FF8FA3ï¼ˆæ¸å˜æ•ˆæœï¼‰
- **èƒŒæ™¯è‰²**ï¼š#FFF5F8ï¼ˆæ·¡ç²‰èƒŒæ™¯ï¼‰
- **å¡ç‰‡è‰²**ï¼š#FFFFFFï¼ˆçº¯ç™½å¡ç‰‡ï¼‰

### UIç‰¹è‰²
- **æ—¶å…‰è½´è®¾è®¡**ï¼šå‚ç›´æ—¶é—´è½´ï¼Œçªå‡ºæ—¶é—´æµé€æ„Ÿ
- **å¡ç‰‡å¸ƒå±€**ï¼šåœ†è§’å¡ç‰‡ï¼ŒæŸ”å’Œé˜´å½±
- **æ¸å˜æ•ˆæœ**ï¼šç²‰è‰²æ¸å˜ï¼Œè¥é€ æ¸©æš–æ°›å›´
- **æµç•…åŠ¨ç”»**ï¼šæ»‘å…¥ã€æ·¡å…¥ç­‰è¿‡æ¸¡åŠ¨ç”»

## ğŸ”Œ APIé›†æˆ

### DeepSeek APIé›†æˆ
```javascript
// æ•…äº‹ç”ŸæˆAPIè°ƒç”¨
const response = await axios.post('https://api.deepseek.com/v1/chat/completions', {
  model: 'deepseek-chat',
  messages: [{
    role: 'user',
    content: `å›¾ç‰‡å†…å®¹ï¼š${objects}ï¼›ç”¨æˆ·æè¿°ï¼š${userText}ï¼›ç”Ÿæˆ80å­—æ¸©æš–æ•…äº‹`
  }],
  max_tokens: 200
}, {
  headers: {
    'Authorization': `Bearer ${process.env.DEEPSEEK_API_KEY}`,
    'Content-Type': 'application/json'
  }
})
```

### è…¾è®¯äº‘AIé›†æˆ
```javascript
// å›¾åƒè¯†åˆ«APIè°ƒç”¨
const client = new tencentcloud.tiia.v20190529.Client({
  credential: {
    secretId: process.env.TENCENT_CLOUD_SECRET_ID,
    secretKey: process.env.TENCENT_CLOUD_SECRET_KEY
  },
  region: "ap-beijing"
})

const response = await client.DetectLabel({
  ImageUrl: imageUrl
})
```

## ğŸ“Š æ•°æ®æµç¨‹å›¾

```mermaid
sequenceDiagram
    participant User as ç”¨æˆ·
    participant Chat as å¾®ä¿¡èŠå¤©
    participant Listener as chatListener
    participant AI as aiProcessor
    participant TencentAI as è…¾è®¯äº‘AI
    participant DeepSeek as DeepSeek API
    participant DB as äº‘æ•°æ®åº“
    participant Timeline as æ—¶å…‰è½´

    User->>Chat: å‘é€ç…§ç‰‡+æ–‡å­—
    Chat->>Listener: è§¦å‘æ¶ˆæ¯ç›‘å¬
    Listener->>AI: è°ƒç”¨AIå¤„ç†
    AI->>TencentAI: å›¾åƒè¯†åˆ«
    TencentAI-->>AI: è¿”å›è¯†åˆ«ç»“æœ
    AI->>DeepSeek: ç”Ÿæˆæ•…äº‹
    DeepSeek-->>AI: è¿”å›æ•…äº‹æ–‡æœ¬
    AI->>DB: å­˜å‚¨è®°å½•
    DB-->>Timeline: å®æ—¶æ›´æ–°
    Timeline-->>User: å±•ç¤ºæ–°è®°å½•
```

## ğŸ”„ å¼€å‘è®¡åˆ’

### P0 åŠŸèƒ½ï¼ˆå·²å®Œæˆï¼‰
- [x] åŸºç¡€é¡¹ç›®æ¶æ„
- [x] äº‘å‡½æ•°æ¡†æ¶
- [x] æ—¶å…‰è½´ç•Œé¢
- [x] æ•°æ®åº“è®¾è®¡
- [x] AIé›†æˆæ–¹æ¡ˆ

### P1 åŠŸèƒ½ï¼ˆå¼€å‘ä¸­ï¼‰
- [ ] DeepSeek APIé›†æˆ
- [ ] è…¾è®¯äº‘AIé›†æˆ
- [ ] èŠå¤©è®°å½•é¡µé¢
- [ ] è®¾ç½®é¡µé¢
- [ ] æ•°æ®å¯¼å‡ºåŠŸèƒ½

### P2 åŠŸèƒ½ï¼ˆè§„åˆ’ä¸­ï¼‰
- [ ] å¤šå®å®æ”¯æŒ
- [ ] æˆé•¿ç»Ÿè®¡å›¾è¡¨
- [ ] å®¶äººåä½œåŠŸèƒ½
- [ ] æ™ºèƒ½ç›¸å†Œç”Ÿæˆ

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## ğŸ“ è”ç³»æ–¹å¼

- é¡¹ç›®åœ°å€ï¼š[GitHub Repository]
- é—®é¢˜åé¦ˆï¼š[Issues]
- é‚®ç®±è”ç³»ï¼šyour-email@example.com

---

**å®å®æˆé•¿è®°å½•** - è®©AIä¸ºæ¯ä¸ªç¾å¥½ç¬é—´å†™ä¸‹æ¸©æš–çš„æ•…äº‹ ğŸ‘¶âœ¨ 